<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>芝士猫视频帧万能提取器</title><meta name="theme-color" content="#000000"/><meta name="description" content="视频帧提取工具 - 无损提取视频帧"/><link rel="apple-touch-icon" href="/logo192.png"/><link rel="manifest" href="/manifest.json"/><link rel="icon" href="/favicon.ico"/><style>body{font-family:'Microsoft YaHei',Arial,sans-serif;margin:0;padding:20px;background-color:#f5f5f5;color:#333}.container{max-width:1100px;margin:0 auto;background:#fff;padding:30px;border-radius:10px;box-shadow:0 2px 15px rgba(0,0,0,.1)}h1,h2{text-align:center;color:#2c3e50;margin-bottom:30px}.title-with-icon{display:flex;align-items:center;justify-content:center;margin-bottom:30px}.cat-icon{width:40px;height:40px;margin-right:10px}.top-nav{display:flex;align-items:center;background-color:#2c3e50;padding:10px 20px;margin:-20px -20px 20px -20px;color:#fff}.nav-logo{width:30px;height:30px;margin-right:10px}.nav-title{font-size:18px;font-weight:700}.form-group{margin-bottom:20px}label{display:block;margin-bottom:8px;font-weight:700;color:#34495e}input,select{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;font-size:16px}input[type=range]{height:25px}button{background-color:#3498db;color:#fff;padding:12px 20px;border:none;border-radius:5px;cursor:pointer;font-size:16px;width:100%;transition:background-color .3s}button:hover{background-color:#2980b9}.upload-area{border:2px dashed #bdc3c7;border-radius:8px;padding:40px 20px;text-align:center;margin-bottom:25px;cursor:pointer;transition:all .3s}.upload-area:hover{border-color:#3498db;background-color:#f8f9fa}.upload-icon{font-size:48px;color:#bdc3c7;margin-bottom:10px}.flash-messages{list-style:none;padding:0;margin-bottom:20px}.flash-message{padding:10px 15px;margin-bottom:10px;border-radius:5px;color:#fff;background-color:#e74c3c}.flash-message.success{background-color:#2ecc71}.param-group{display:grid;grid-template-columns:1fr 1fr;gap:15px}.quality-display{display:inline-block;margin-left:10px;font-weight:700;color:#3498db}footer{text-align:center;margin-top:30px;color:#7f8c8d;font-size:14px}#results-section{display:none;margin-top:40px;border-top:1px solid #e0e0e0;padding-top:30px}.loading{text-align:center;padding:30px;display:none}.spinner{border:5px solid #f3f3f3;border-top:5px solid #3498db;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;margin:0 auto 20px}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.frames-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;margin-top:20px}.frame-card{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;transition:transform .3s,box-shadow .3s;position:relative;display:flex;flex-direction:column}.frame-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,.1)}.frame-image-container{width:100%;height:250px;display:flex;align-items:center;justify-content:center;background-color:#f7f7f7;position:relative;overflow:hidden}.frame-image{max-width:100%;max-height:100%;object-fit:contain;cursor:pointer}.frame-info{padding:10px;background-color:#f9f9f9}.frame-number{margin:0;color:#2c3e50;font-weight:700;font-size:14px}.download-link{display:block;text-align:center;margin-top:8px;color:#3498db;text-decoration:none;font-weight:700;font-size:13px}.download-link:hover{color:#2980b9;text-decoration:underline}.actions{display:flex;justify-content:center;margin-bottom:20px}.btn{display:inline-block;padding:10px 20px;background-color:#3498db;color:#fff;border:none;border-radius:5px;text-decoration:none;font-size:16px;cursor:pointer;transition:background-color .3s;margin:0 10px}.btn:hover{background-color:#2980b9}.image-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);z-index:1000;justify-content:center;align-items:center}.modal-content{max-width:90%;max-height:90%;object-fit:contain}.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:40px;cursor:pointer;z-index:1010}.frame-checkbox{position:absolute;top:10px;right:10px;width:20px;height:20px;z-index:10;cursor:pointer}.frame-checkbox-label{display:inline-block;width:20px;height:20px;background-color:rgba(255,255,255,.7);border:2px solid #3498db;border-radius:4px;position:absolute;top:10px;right:10px;cursor:pointer;z-index:5}.frame-checkbox:checked+.frame-checkbox-label{background-color:#3498db}.frame-checkbox:checked+.frame-checkbox-label:after{content:'✓';position:absolute;top:-2px;left:3px;color:#fff;font-size:14px}.select-actions{margin-top:15px;display:flex;justify-content:space-between}.btn-select-all{background-color:#95a5a6;color:#fff;border:none;padding:5px 10px;border-radius:3px;cursor:pointer;font-size:14px}.btn-select-all:hover{background-color:#7f8c8d}.nav-btn{position:absolute;top:50%;transform:translateY(-50%);color:#fff;font-size:50px;background-color:rgba(0,0,0,.3);width:60px;height:60px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:all .2s;z-index:1010}.nav-btn:hover{background-color:rgba(0,0,0,.5);transform:translateY(-50%) scale(1.1)}.prev-btn{left:30px}.next-btn{right:30px}.image-counter{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#fff;background-color:rgba(0,0,0,.5);padding:5px 15px;border-radius:20px;font-size:14px;z-index:1010}</style><script defer="defer" src="/static/js/main.2a74524b.js"></script><link href="/static/css/main.8a047587.css" rel="stylesheet"></head><body><noscript>您需要启用JavaScript才能运行此应用。</noscript><div id="root"></div><div id="static-app" style="display:none"><div class="top-nav"><img src="images/cat-icon.png" alt="芝士猫" class="nav-logo"><div class="nav-title">芝士猫视频工具</div></div><div class="container"><div class="title-with-icon"><img src="images/cat-icon.png" alt="芝士猫" class="cat-icon"><h1>芝士猫视频帧万能提取器</h1></div><div id="message-area" class="flash-messages"></div><form id="extract-form" enctype="multipart/form-data"><div class="upload-area" id="upload-area"><div class="upload-icon">📁</div><h3>点击选择视频文件或拖放到此处</h3><p>支持的格式: MP4, AVI, MOV, WMV, FLV, MKV</p><input type="file" name="video" id="video-input" accept=".mp4,.avi,.mov,.mkv,.wmv,.flv" style="display:none"><div id="file-name" style="margin-top:10px;font-weight:700"></div></div><div class="param-group"><div class="form-group"><label for="fps">帧率 (FPS)</label> <select name="fps" id="fps"><option value="0.5">0.5 (每2秒1帧)</option><option value="1" selected="selected">1 (每秒1帧)</option><option value="2">2 (每秒2帧)</option><option value="5">5 (每秒5帧)</option><option value="10">10 (每秒10帧)</option><option value="15">15 (每秒15帧)</option><option value="30">30 (每秒30帧)</option></select></div><div class="form-group"><label for="format">图像格式</label> <select name="format" id="format"><option value="jpg" selected="selected">JPG</option><option value="png">PNG</option></select></div></div><div class="form-group"><label for="quality">图像质量 <span id="quality-value" class="quality-display">90</span></label> <input type="range" name="quality" id="quality" min="10" max="100" value="90"></div><div class="param-group"><div class="form-group"><label for="start_time">开始时间 (秒, 可选)</label> <input type="number" name="start_time" id="start_time" min="0" step="0.1" placeholder="从视频开始"></div><div class="form-group"><label for="end_time">结束时间 (秒, 可选)</label> <input type="number" name="end_time" id="end_time" min="0" step="0.1" placeholder="到视频结束"></div></div><button type="submit" id="extract-btn">提取视频帧</button></form><div id="loading" class="loading"><div class="spinner"></div><p>正在处理视频，请稍候...</p></div><div id="results-section"><h2>提取结果</h2><div class="actions"><button id="back-to-form" class="btn">返回上传</button> <button id="download-selected-btn" class="btn">下载所有选中帧</button></div><div class="select-actions"><button id="select-all-btn" class="btn-select-all">全选</button> <button id="deselect-all-btn" class="btn-select-all">取消全选</button></div><div id="frames-container" class="frames-container"></div></div><footer><p>芝士猫视频帧万能提取工具 &copy; 2025，欢迎建议与反馈：imluluj8@outlook.com</p></footer></div><div class="image-modal" id="image-modal"><span class="close-modal" onclick="closeModal()">&times;</span><div class="nav-btn prev-btn" id="prev-btn">&lt;</div><div class="nav-btn next-btn" id="next-btn">&gt;</div><img class="modal-content" id="modal-image"><div class="image-counter" id="image-counter">1/10</div></div></div><script>function initStaticApp(){const e=document.getElementById("upload-area"),t=document.getElementById("video-input"),n=document.getElementById("file-name");e.addEventListener("click",(()=>{t.click()})),t.addEventListener("change",(()=>{t.files.length>0&&(n.textContent="已选择: "+t.files[0].name,e.style.borderColor="#2ecc71")})),e.addEventListener("dragover",(t=>{t.preventDefault(),e.style.borderColor="#3498db",e.style.backgroundColor="#ecf0f1"})),e.addEventListener("dragleave",(()=>{e.style.borderColor="#bdc3c7",e.style.backgroundColor=""})),e.addEventListener("drop",(o=>{o.preventDefault(),o.dataTransfer.files.length>0&&(t.files=o.dataTransfer.files,t.files[0].type.startsWith("video/")?(n.textContent="已选择: "+t.files[0].name,e.style.borderColor="#2ecc71"):(alert("请上传视频文件"),e.style.borderColor="#e74c3c")),e.style.backgroundColor=""}));const o=document.getElementById("quality"),c=document.getElementById("quality-value");o.addEventListener("input",(()=>{c.textContent=o.value}));const l=document.getElementById("extract-form"),d=document.getElementById("loading"),a=document.getElementById("results-section"),r=document.getElementById("frames-container"),m=document.getElementById("message-area"),s=document.getElementById("back-to-form"),i=document.getElementById("download-selected-btn");function u(e,t="error"){m.innerHTML=`<li class="flash-message ${"success"===t?"success":""}">${e}</li>`}l.addEventListener("submit",(function(e){if(e.preventDefault(),!t.files||0===t.files.length)return void u("请选择视频文件","error");d.style.display="block",m.innerHTML="";const n=new FormData(l);fetch("/upload_ajax",{method:"POST",body:n}).then((e=>{if(!e.ok)throw new Error("网络错误");return e.json()})).then((e=>{d.style.display="none",e.error?u(e.error,"error"):function(e){r.innerHTML="",e.frames.forEach(((t,n)=>{const o=document.createElement("div");o.className="frame-card";const c=document.createElement("input");c.type="checkbox",c.className="frame-checkbox",c.id=`frame-checkbox-${n}`,c.dataset.url=t.url,c.dataset.filename=`frame_${n}.${e.format}`;const l=document.createElement("label");l.className="frame-checkbox-label",l.htmlFor=`frame-checkbox-${n}`;const d=document.createElement("div");d.className="frame-image-container";const a=document.createElement("img");a.src=t.url,a.alt=`Frame ${n+1}`,a.className="frame-image",a.onclick=function(){showImage(t.url)},d.appendChild(a);const m=document.createElement("div");m.className="frame-info";const s=document.createElement("p");s.className="frame-number",s.textContent=`帧 ${n+1}`;const i=document.createElement("a");i.href=t.url,i.className="download-link",i.textContent="下载",i.download=`frame_${n}.${e.format}`,m.appendChild(s),m.appendChild(i),o.appendChild(c),o.appendChild(l),o.appendChild(d),o.appendChild(m),r.appendChild(o)})),i.href=`/download_all/${e.folder_name}`,a.style.display="block",a.scrollIntoView({behavior:"smooth"}),u(`成功提取 ${e.count} 帧`,"success")}(e)})).catch((e=>{d.style.display="none",u("处理请求时出错: "+e.message,"error")}))})),s.addEventListener("click",(function(){a.style.display="none",window.scrollTo({top:0,behavior:"smooth"})}));const f=document.getElementById("download-selected-btn"),y=document.getElementById("select-all-btn"),g=document.getElementById("deselect-all-btn");y.addEventListener("click",(function(){document.querySelectorAll(".frame-checkbox").forEach((e=>{e.checked=!0}))})),g.addEventListener("click",(function(){document.querySelectorAll(".frame-checkbox").forEach((e=>{e.checked=!1}))})),f.addEventListener("click",(function(){const e=document.querySelectorAll(".frame-checkbox:checked");0!==e.length?(e.forEach(((e,t)=>{const n=document.createElement("a");n.href=e.dataset.url,n.download=e.dataset.filename,setTimeout((()=>{document.body.appendChild(n),n.click(),document.body.removeChild(n)}),100*t)})),u(`正在下载 ${e.length} 个帧`,"success")):alert("请至少选择一个帧进行下载")}));let h=0,E=[];function p(){document.getElementById("image-counter").textContent=`${h+1}/${E.length}`}function b(){0!==E.length&&(h=(h-1+E.length)%E.length,document.getElementById("modal-image").src=E[h],p())}function k(){0!==E.length&&(h=(h+1)%E.length,document.getElementById("modal-image").src=E[h],p())}function v(e){"ArrowLeft"===e.key?b():"ArrowRight"===e.key?k():"Escape"===e.key&&closeModal()}window.showImage=function(e){const t=document.getElementById("image-modal"),n=document.getElementById("modal-image");document.getElementById("image-counter");E=Array.from(document.querySelectorAll(".frame-image")).map((e=>e.src)),h=E.indexOf(e),t.style.display="flex",n.src=e,p(),document.addEventListener("keydown",v)},window.closeModal=function(){document.getElementById("image-modal").style.display="none",document.removeEventListener("keydown",v)},window.onclick=function(e){const t=document.getElementById("image-modal");e.target==t&&closeModal()},document.getElementById("prev-btn").addEventListener("click",(function(e){e.stopPropagation(),b()})),document.getElementById("next-btn").addEventListener("click",(function(e){e.stopPropagation(),k()}))}document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){const e=document.getElementById("root");e&&0===e.children.length&&(document.getElementById("static-app").style.display="block",initStaticApp())}),500)}))</script></body></html>